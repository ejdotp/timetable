<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>241044</title>

  <!-- Firebase SDKs (copied from your snippet) -->
  <script defer src="/__/firebase/12.2.1/firebase-app-compat.js"></script>
  <script defer src="/__/firebase/12.2.1/firebase-auth-compat.js"></script>
  <script defer src="/__/firebase/12.2.1/firebase-database-compat.js"></script>
  <script defer src="/__/firebase/12.2.1/firebase-firestore-compat.js"></script>
  <script defer src="/__/firebase/12.2.1/firebase-functions-compat.js"></script>
  <script defer src="/__/firebase/12.2.1/firebase-messaging-compat.js"></script>
  <script defer src="/__/firebase/12.2.1/firebase-storage-compat.js"></script>
  <script defer src="/__/firebase/12.2.1/firebase-analytics-compat.js"></script>
  <script defer src="/__/firebase/12.2.1/firebase-remote-config-compat.js"></script>
  <script defer src="/__/firebase/12.2.1/firebase-performance-compat.js"></script>
  <!-- initialize the SDK after features are loaded; using emulator flag as in your snippet -->
  <script defer src="/__/firebase/init.js?useEmulator=true"></script>

  <style>
    :root {
      --bg: #ffffff;
      --text: #111;
      --muted: #f6f8fa;
      --border: #2f2f2f;
      --highlight: #fff3bf;
      --accent: #0b69a3;
    }

    body.dark {
      --bg: #0f1113;
      --text: #e6eef6;
      --muted: #111316;
      --border: #999999;
      --highlight: #5a4300;
    }

    body {
      margin: 18px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: var(--bg);
      color: var(--text);
      transition: background .18s, color .18s;
    }

    .controls {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }

    button#darkToggle {
      padding: 8px 12px;
      border-radius: 8px;
      border: 2px solid var(--border);
      background: transparent;
      color: var(--text);
      cursor: pointer;
      font-weight: 600;
    }

    .firebase-status {
      font-size: 13px;
      color: rgba(0, 0, 0, 0.6);
      padding: 6px 8px;
      border-radius: 6px;
      border: 1px dashed rgba(0, 0, 0, 0.06);
    }

    .wrap {
      overflow: auto;
      border-radius: 8px;
      border: 1px solid var(--border);
      padding: 6px;
    }

    table.timetable {
      border-collapse: collapse;
      min-width: 980px;
      width: 100%;
      table-layout: fixed;
      font-size: 14px;
      background: var(--bg);
    }

    thead th {
      background: var(--muted);
      padding: 10px;
      border: 2px solid var(--border);
      text-align: left;
      font-weight: 700;
    }

    th.time-col,
    td.time-col {
      position: sticky;
      left: 0;
      z-index: 100;
      /* stays above scrolled cells */
      background: var(--bg);
      /* solid background */
      border-right: 2px solid var(--border);
      /* keep border visible */
      min-width: 92px;
      width: 92px;
      text-align: center;
      font-weight: 700;
      padding: 10px;
      box-shadow: 4px 0 8px -4px rgba(0, 0, 0, 0.06);
      /* subtle separator shadow */
    }

    thead th.time-col {
      z-index: 110;
    }


    td {
      padding: 10px;
      border: 2px solid var(--border);
      vertical-align: middle;
      height: 60px;
      text-align: center;
      box-sizing: border-box;
    }

    .abbr {
      display: block;
      font-weight: 700;
      font-size: 13px;
    }

    .room {
      display: block;
      font-size: 12px;
      margin-top: 4px;
      opacity: 0.95;
    }

    tbody tr:nth-child(even) td {
      background: rgba(0, 0, 0, 0.02);
    }

    @media screen {
      thead th.today {
        background: var(--highlight) !important;
      }

      td.today {
        background: var(--highlight) !important;
      }
    }

    @media print {

      thead th.today,
      td.today {
        background: transparent !important;
      }

      .no-print {
        display: none !important;
      }

      th.time-col,
      td.time-col {
        position: static;
      }
    }

    .legend {
      margin-top: 14px;
      max-width: 980px;
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    .legend th,
    .legend td {
      padding: 8px;
      border: 1px solid var(--border);
      text-align: left;
    }

    .legend thead th {
      background: var(--muted);
      font-weight: 700;
    }

    @media (max-width:760px) {
      table.timetable {
        font-size: 13px;
        min-width: 940px;
      }

      .legend {
        min-width: 940px;
      }
    }
  </style>
</head>

<body>

  <div class="controls no-print">
    <button id="darkToggle">Enable Dark Mode</button>

    <!-- Firebase status element (keeps the firebase snippet behaviour but integrated) -->
    <div id="firebase-status" class="firebase-status" aria-live="polite">Firebase: loading…</div>

    <div style="font-size:13px; opacity:0.9;">
      (Highlight shows <strong>today</strong> in browser only; disabled when printing)
    </div>
  </div>

  <div class="wrap">
    <table class="timetable" id="timetable" aria-describedby="legend">
      <thead>
        <tr>
          <th class="time-col">Time</th>
          <th>Mon</th>
          <th>Tue</th>
          <th>Wed</th>
          <th>Thu</th>
          <th>Fri</th>
          <th>Sat</th>
          <th>Sun</th>
        </tr>
      </thead>
      <tbody>
        <!-- 08:00 AM -->
        <tr>
          <td class="time-col">08:00 AM</td>
          <td><span class="abbr">MTES</span><span class="room">E311</span></td>
          <td rowspan="2"><span class="abbr">PRPWA</span><span class="room">E125</span></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>

        <!-- 09:00 AM -->
        <tr>
          <td class="time-col">09:00 AM</td>
          <td><span class="abbr">SEA</span><span class="room">E311</span></td>
          <td rowspan="2"><span class="abbr">DMPA</span><span class="room">E311</span></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>

        <!-- 10:00 AM -->
        <tr>
          <td class="time-col">10:00 AM</td>
          <td><span class="abbr">DLUP</span><span class="room">E311</span></td>
          <td><span class="abbr">LLM</span><span class="room">E311</span></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>

        <!-- 11:00 AM -->
        <tr>
          <td class="time-col">11:00 AM</td>
          <td rowspan="2"><span class="abbr">PRPWA</span><span class="room">E125</span></td>
          <td><span class="abbr">MTES</span><span class="room">E311</span></td>
          <td rowspan="2"><span class="abbr">PRPWA</span><span class="room">E125</span></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>

        <!-- 12:00 PM -->
        <tr>
          <td class="time-col">12:00 PM</td>
          <td><span class="abbr">SEA</span><span class="room">E311</span></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>

        <!-- 01:00 PM (break row) -->
        <tr>
          <td class="time-col">01:00 PM</td>
          <td colspan="7"></td>
        </tr>

        <!-- 02:00 PM -->
        <tr>
          <td class="time-col">02:00 PM</td>
          <td></td>
          <td></td>
          <td></td>
          <td rowspan="2"><span class="abbr">LLM</span><span class="room">E311</span></td>
          <td rowspan="2"><span class="abbr">DMPA</span><span class="room">E311</span></td>
          <td><span class="abbr">MTES</span><span class="room">E311</span></td>
          <td></td>
        </tr>

        <!-- 03:00 PM -->
        <tr>
          <td class="time-col">03:00 PM</td>
          <td></td>
          <td></td>
          <td></td>
          <td><span class="abbr">LLM</span><span class="room">E311</span></td>
          <td></td>
        </tr>

        <!-- 04:00 PM -->
        <tr>
          <td class="time-col">04:00 PM</td>
          <td></td>
          <td></td>
          <td></td>
          <td><span class="abbr">MTES</span><span class="room">E311</span></td>
          <td rowspan="2"><span class="abbr">DLUP</span><span class="room">E311</span></td>
          <td rowspan="2"><span class="abbr">SEA</span><span class="room">E311</span></td>
          <td></td>
        </tr>

        <!-- 05:00 PM -->
        <tr>
          <td class="time-col">05:00 PM</td>
          <td></td>
          <td></td>
          <td></td>
          <td><span class="abbr">DLUP</span><span class="room">E311</span></td>
          <td></td>
        </tr>

        <!-- 06:00 PM (blank row requested) -->
        <tr>
          <td class="time-col">06:00 PM</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>

      </tbody>
    </table>
  </div>

  <h3 id="legend">Legend</h3>
  <table class="legend" role="table" aria-label="Legend">
    <thead>
      <tr>
        <th>Abbrev</th>
        <th>Subject (full)</th>
        <th>Subject Code</th>
        <th>Teacher</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>PRPWA</strong></td>
        <td>Practical Robotics Projects with Arduino</td>
        <td>CSE4571</td>
        <td>Suprava R. Laha</td>
      </tr>
      <tr>
        <td><strong>SEA</strong></td>
        <td>Software Engineering Approach</td>
        <td>CSE4658</td>
        <td>Rashmi Maheshwari</td>
      </tr>
      <tr>
        <td><strong>DLUP</strong></td>
        <td>Deep Learning using Python</td>
        <td>CSE4685</td>
        <td>Avinash Potluri</td>
      </tr>
      <tr>
        <td><strong>DMPA</strong></td>
        <td>Data Mining & Predictive Analytics</td>
        <td>CSE4859</td>
        <td>Rina Mahakud</td>
      </tr>
      <tr>
        <td><strong>LLM</strong></td>
        <td>Large Language Models</td>
        <td>CSE4375</td>
        <td>RUBY</td>
      </tr>
      <tr>
        <td><strong>MTES</strong></td>
        <td>Management Topics in Environmental Studies</td>
        <td>CHM2049</td>
        <td>Sulochana Singh / Nimai Ch. Nayak</td>
      </tr>
    </tbody>
  </table>

  <!-- Firebase integration + timetable JS -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Update firebase status element (keeps behavior from your Firebase snippet)
      const statusEl = document.getElementById('firebase-status');
      if (statusEl) statusEl.textContent = 'Firebase SDK loading…';

      // Attempt to detect loaded firebase features once SDK init runs
      // Wrap in try/catch in case firebase isn't initialized yet
      try {
        const app = firebase.app();
        const features = [
          'auth',
          'database',
          'firestore',
          'functions',
          'messaging',
          'storage',
          'analytics',
          'remoteConfig',
          'performance',
        ].filter(feature => typeof app[feature] === 'function');

        if (statusEl) {
          if (features.length) {
            statusEl.textContent = `Firebase SDK loaded: ${features.join(', ')}`;
          } else {
            statusEl.textContent = 'Firebase SDK loaded (no optional features active)';
          }
        }
      } catch (e) {
        // If app() throws because init.js hasn't run yet, wait a short time and try again
        setTimeout(() => {
          try {
            const app2 = firebase.app();
            const features2 = [
              'auth',
              'database',
              'firestore',
              'functions',
              'messaging',
              'storage',
              'analytics',
              'remoteConfig',
              'performance',
            ].filter(feature => typeof app2[feature] === 'function');

            if (statusEl) {
              if (features2.length) {
                statusEl.textContent = `Firebase SDK loaded: ${features2.join(', ')}`;
              } else {
                statusEl.textContent = 'Firebase SDK loaded (no optional features active)';
              }
            }
          } catch (e2) {
            if (statusEl) statusEl.textContent = 'Firebase SDK not available (check console)';
            console.error('Firebase init error:', e2);
          }
        }, 600);
      }
    });

    // Timetable highlighting + dark mode logic (unchanged, robust)
    (function () {
      const table = document.getElementById('timetable');
      // JS Date.getDay(): 0=Sun .. 6=Sat
      const todayD = new Date().getDay();
      // header nth-child index mapping: 1=time, 2=Mon ... 8=Sun
      const headerNth = (todayD === 0) ? 8 : (todayD + 1);
      const wrap = document.querySelector('.wrap');

      // highlight header
      const headCell = table.querySelector(`thead tr th:nth-child(${headerNth})`);
      if (headCell) headCell.classList.add('today');

      // Build occupancy grid (rows x 7 day-columns). Indexing:
      // - dayCols: 0..6 mapping to header columns Mon..Sun
      const tbody = table.tBodies[0];
      const rows = Array.from(tbody.rows);
      const R = rows.length;
      const C = 7; // Mon..Sun columns

      // initialize grid with nulls
      const grid = Array.from({ length: R }, () => Array(C).fill(null));

      for (let r = 0; r < R; r++) {
        const row = rows[r];
        const cells = Array.from(row.querySelectorAll('td')).slice(1);

        let c = 0; // pointer in day columns for this row
        while (c < C && grid[r][c] !== null) c++;

        for (let ci = 0; ci < cells.length; ci++) {
          while (c < C && grid[r][c] !== null) c++;
          if (c >= C) break;

          const cell = cells[ci];
          const colspan = Math.max(1, parseInt(cell.getAttribute('colspan') || '1', 10));
          const rowspan = Math.max(1, parseInt(cell.getAttribute('rowspan') || '1', 10));

          for (let rr = 0; rr < rowspan; rr++) {
            for (let cc = 0; cc < colspan; cc++) {
              const rrIdx = r + rr;
              const ccIdx = c + cc;
              if (rrIdx < R && ccIdx < C) grid[rrIdx][ccIdx] = cell;
            }
          }
          c += colspan;
        }
      }

      // Only highlight single-day cells (colspan === 1) to avoid highlighting the big break
      const targetCol = (todayD === 0) ? 6 : (todayD - 1); // Mon=0..Sun=6

      for (let r = 0; r < R; r++) {
        const cell = grid[r][targetCol];
        if (!cell) continue;
        const colspan = Math.max(1, parseInt(cell.getAttribute('colspan') || '1', 10));
        if (colspan === 1) cell.classList.add('today');
      }

      // Dark mode persistence
      const toggle = document.getElementById('darkToggle');
      function applyDark(isDark) {
        document.body.classList.toggle('dark', !!isDark);
        toggle.setAttribute('aria-pressed', !!isDark);
        toggle.textContent = !!isDark ? 'Disable Dark Mode' : 'Enable Dark Mode';
      }

      const stored = localStorage.getItem('tt-dark');
      applyDark(stored === '1');

      toggle.addEventListener('click', () => {
        const now = !document.body.classList.contains('dark');
        applyDark(now);
        localStorage.setItem('tt-dark', now ? '1' : '0');
      });

      // keyboard shortcut Ctrl/Cmd + D
      document.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'd') {
          e.preventDefault();
          toggle.click();
        }
      });

      function centerTodayInView(smooth = true) {
        try {
          const headerIndex = (todayD === 0) ? 8 : (todayD + 1); // Sunday=8th col
          const hdr = table.querySelector(`thead tr th:nth-child(${headerIndex})`);
          if (!hdr) return;

          const hdrRect = hdr.getBoundingClientRect();
          const wrapRect = wrap.getBoundingClientRect();
          const delta = (hdrRect.left + hdrRect.width / 2) - (wrapRect.left + wrapRect.width / 2);
          const target = wrap.scrollLeft + delta;

          if (smooth && 'scrollTo' in wrap) {
            wrap.scrollTo({ left: target, behavior: 'smooth' });
          } else {
            wrap.scrollLeft = target;
          }
        } catch (err) {
          console.error('centerTodayInView error', err);
        }
      }

      setTimeout(() => centerTodayInView(true), 160);
      window.addEventListener('resize', () => setTimeout(() => centerTodayInView(true), 120));
      window.addEventListener('orientationchange', () => setTimeout(() => centerTodayInView(true), 200));

    })();
  </script>

</body>

</html>